create table person
(
    id        int generated by default as identity primary key,
    name      varchar(32)                                      not null,
    lastname  varchar(32)                                      not null,
    inn       varchar(10) check ( inn ~ '^[0-9]{10}$' ) unique not null,
    birthdate date
);

insert into person (name, lastname, inn, birthdate)
values ('Oleksii', 'Bashkirov', '3332221110', '1989-08-25'),
       ('Ivan', 'Petrov', '3231212456', '2001-02-15'),
       ('Sveta', 'Kozakova', '3202504585', '1995-09-29'),
       ('Olga', 'Vasilenko', '3012546545', '1975-04-11'),
       ('Igor', 'Smirenko', '2904561232', '1960-05-09');

create table book
(
    id        int generated by default as identity primary key,
    title     varchar(64)                                           not null,
    author    varchar(64)                                           not null,
    year      int check ( year <= 2024)                             not null,
    article   varchar(11) check ( article ~ '^\d{4}-\d{6}$') unique not null,
    person_id int                                                   references person (id) on delete set null
);

drop table book;

insert into book(title, author, year, article)
values ('Harry Potter 1', 'J.K. Rowling', 1998, '0000-000001'),
       ('Harry Potter 2', 'J.K. Rowling', 1998, '0000-000002'),
       ('Harry Potter 3', 'J.K. Rowling', 1999, '0000-000003'),
       ('Harry Potter 4', 'J.K. Rowling', 2000, '0000-000004'),
       ('Harry Potter 5', 'J.K. Rowling', 2003, '0000-000005'),
       ('Harry Potter 6', 'J.K. Rowling', 2005, '0000-000006'),
       ('Harry Potter 7', 'J.K. Rowling', 2007, '0000-000007'),
       ('The Picture of Dorian Gray', 'Oscar Wilde', 1890, '0000-000008'),
       ('1984', 'George Orwell', 1949, '0000-000009'),
       ('Murder on the Orient Express', 'Agatha Christie', 1934, '0000-000010');

select *
from book;